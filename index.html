<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>3D Planetary System</title>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <script src="https://threejs.org/build/three.js"></script>
    <script src="https://unpkg.com/three@0.112/examples/jsm/controls/OrbitControls.js"></script>

    <script>
      // Set up the scene, camera, and renderer
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Create a starfield background
      const starsGeometry = new THREE.BufferGeometry();
      const starsMaterial = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.1 });

      const starsVertices = [];
      for (let i = 0; i < 10000; i++) {
        const x = (Math.random() - 0.5) * 2000;
        const y = (Math.random() - 0.5) * 2000;
        const z = (Math.random() - 0.5) * 2000;
        starsVertices.push(x, y, z);
      }

      starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
      const stars = new THREE.Points(starsGeometry, starsMaterial);
      scene.add(stars);

      // Create the sun with a textured image
      const sunTexture = new THREE.TextureLoader().load('2k_venus_surface.jpg');
      const sunMaterial = new THREE.MeshBasicMaterial({ map: sunTexture });
      const sunGeometry = new THREE.SphereGeometry(5, 32, 32);
      const sun = new THREE.Mesh(sunGeometry, sunMaterial);
      scene.add(sun);

      // Create planets with elliptical orbits
      const planets = [];
      const numPlanets = 5;

      for (let i = 0; i < numPlanets; i++) {
        const planetTexture = new THREE.TextureLoader().load(`logo.png`);
        const planetMaterial = new THREE.MeshBasicMaterial({ map: planetTexture });
        const planetGeometry = new THREE.SphereGeometry(1, 32, 32);
        const planet = new THREE.Mesh(planetGeometry, planetMaterial);

        const orbit = new THREE.EllipseCurve(
          10 + i * 5, // x
          0, // y
          10 + i * 5, // radiusX
          5 + i * 2 // radiusY
        );

        const points = orbit.getPoints(100);
        const orbitPath = new THREE.BufferGeometry().setFromPoints(points);

        const orbitLine = new THREE.Line(orbitPath, new THREE.LineBasicMaterial({ color: 0xffffff }));
        scene.add(orbitLine);

        planets.push({ planet, orbitLine });
        scene.add(planet);
      }

      // Set up camera position and controls
      camera.position.z = 20;
      const controls = new THREE.OrbitControls(camera, renderer.domElement);

      // Animation loop
      const animate = function () {
        requestAnimationFrame(animate);

        // Rotate the planets around the sun
        planets.forEach(({ planet, orbitLine }, index) => {
          const angle = (Date.now() * 0.0001 * (index + 1)) % (Math.PI * 2);
          const x = orbitLine.geometry.attributes.position.getX(0);
          const z = orbitLine.geometry.attributes.position.getZ(0);
          planet.position.set(Math.cos(angle) * x, 0, Math.sin(angle) * z);
        });

        // Rotate the entire planetary system
        scene.rotation.y += 0.001;

        // Render the scene
        renderer.render(scene, camera);
      };

      animate();
    </script>
  </body>
</html>
